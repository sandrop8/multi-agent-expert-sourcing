# Project Outline: Company Service Registration & Web Scraping Workflow

This document outlines the step-by-step plan to implement a new feature allowing companies/agencies to register their services. This workflow will utilize the CrewAI framework for backend processing.

## Phase 1: Frontend UI Implementation (Static)

1.  **Update Homepage (`/`)**:
    *   Add a third container to `frontend/app/page.tsx` alongside "Submit a Project" and "I'm a Freelancer".
    *   **Title**: "Register as a Service Provider"
    *   **Design**: The container will have a consistent design with the existing two cards.
    *   **Link**: It will link to a new page, `/company-registration`.

2.  **Create Company Registration Page (`/company-registration`)**:
    *   Create a new page `frontend/app/company-registration/page.tsx`.
    *   **Design**: The page layout and styling should be consistent with `frontend/app/project/page.tsx`.
    *   **Inputs**:
        *   A required input field for the company's website URL.
        *   An optional input field for the company's LinkedIn profile URL.
    *   **Action**: A "Register" or "Submit for Analysis" button.
    *   **Functionality**: Initially, the button will have no action. The focus is on UI and page flow first.

## Phase 2: Backend - CrewAI Agent Workflow (Planning & Implementation)

This phase will use `CrewAI` exclusively for the agentic workflow, demonstrating its capabilities, particularly in web scraping.

1.  **Setup CrewAI Environment**:
    *   Add `crewai` and `crewai-tools` to the backend dependencies in `pyproject.toml`.
    *   Configure necessary API keys (e.g., `OPENAI_API_KEY`, and potentially keys for scraping services like `FIRECRAWL_API_KEY`).

2.  **Define CrewAI Agents & Tasks**:
    *   Create a new file `backend/app_agents/company_agents.py`.
    *   **Website Scraping Agent**:
        *   **Role**: A specialist in extracting information from company websites.
        *   **Goal**: To scrape the provided company URL and extract key information like services offered, company mission, "About Us" text, and contact details.
        *   **Tools**: `ScrapeWebsiteTool`, `SeleniumScrapingTool` from `crewai-tools`.
    *   **LinkedIn Scraping Agent (Optional Extension)**:
        *   **Role**: A specialist in extracting data from LinkedIn company profiles.
        *   **Goal**: To scrape the LinkedIn URL to get company size, industry, and other relevant data.
        *   **Tools**: This is complex due to LinkedIn's restrictions and may require advanced tools like `Browserbase` or a custom `SeleniumScrapingTool` with authentication handling.
    *   **Company Profile Analyst Agent**:
        *   **Role**: An expert in analyzing corporate data to build a comprehensive company profile.
        *   **Goal**: To synthesize information from the scraping agents into a structured JSON object, creating a clean, summarized profile of the company.
        *   **Tools**: This agent will primarily process text and may not require external tools.
    *   **Define Tasks**:
        *   Task 1: Scrape the company website for general information.
        *   Task 2: (Optional) Scrape the LinkedIn profile for corporate data.
        *   Task 3: Analyze the scraped content to create a structured company profile.

3.  **Create the Crew**:
    *   Define a `Crew` in `company_agents.py` to orchestrate the agents and tasks in a sequential process.
    *   The crew will take the website URL and optional LinkedIn URL as input.

4.  **Create API Endpoint**:
    *   Add a new endpoint, `POST /register-company`, in `backend/main.py`.
    *   This endpoint will receive the URLs from the frontend, initialize the CrewAI crew, and run the analysis.
    *   It will return the structured JSON profile generated by the crew.

## Phase 3: Frontend-Backend Integration

1.  **Connect Registration Page to Backend**:
    *   In `frontend/app/company-registration/page.tsx`, implement the `onClick` handler for the "Register" button.
    *   It will make a `POST` request to the `/register-company` endpoint with the URL(s).
    *   Implement loading, success, and error states on the UI.
    *   Display a confirmation message or the analysis results upon successful submission.

## Phase 4: Testing

1.  **Backend Testing**:
    *   Create `backend/tests/test_company_agents.py`.
    *   **Unit Tests**: Test the creation of individual CrewAI agents and tasks, mocking scraping tools.
    *   **Integration Tests**: Test the `POST /register-company` endpoint using a mock website to validate the end-to-end flow.

2.  **Frontend Testing**:
    *   Create `frontend/app/company-registration/__tests__/page.test.tsx`.
    *   **Unit/Integration Tests**: Test the rendering of the registration page, user input, and mock `fetch` calls to test UI states (loading, success, error).

3.  **E2E Testing**:
    *   Add `frontend/e2e/company-registration.spec.ts`.
    *   The test will cover the user journey from the homepage to the registration page, form submission, and UI updates based on a mocked API response.
